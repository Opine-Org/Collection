services:
    containerCache:
        class:     'Opine\Container\Cache'
        arguments: ['%root%', '@container', '@bundleRoute', '@cache']
    cache:
        class:     'Opine\Cache'
    topic:
        class:     'Opine\Topic'
        arguments: ['@container']
    config:
        class:     'Opine\Config'
        arguments: ['%root%', '@cache']
    db:
        class:     'Opine\Mongo'
        arguments: ['@config', '@topic']
    collectionRoute:
        class:     'Opine\Collection\Route'
        arguments: ['@route', '@collectionModel']
    collection:
        class:     'Opine\Collection\Service'
        arguments: ['%root%', '@db', '@queue', '@search']
    collectionModel:
        class:     'Opine\Collection\Model'
        arguments: ['%root%', '@collection']
    collectionController:
        class:     'Opine\Collection\Controller'
        arguments: ['@collectionModel', '@collectionView']
    collectionView:
        class:     'Opine\Collection\View'
        arguments: ['@separation']
    yamlSlow:
        class:     'Symfony\Component\Yaml\Yaml'
    separation:
        class:     'Opine\Separation'
        arguments: ['%root%', '@handlebars', '@cache', '@config', '@yamlSlow', '@route']
    handlebars:
        class:     'Handlebars\Handlebars'
    queueGateway: 
        class:     'Pheanstalk_Pheanstalk'
        arguments: ['127.0.0.1']
    queue:
        class:     'Opine\Queue'
        arguments: ['@queueGateway', '%root%']
    searchGateway:
        class:     'Elasticsearch\Client'
    search:
        class:     'Opine\Search'
        arguments: ['%root%', '@searchGateway']
    route:
        class:     'Opine\Route'
        arguments: ['%root%', '@fastrouteCollector', '@container']
    redirect:
        class:     'Opine\Redirect'
        arguments: ['@route']
    fastrouteCollector:
        class:     'FastRoute\RouteCollector'
        arguments: ['@fastrouteParser', '@fastrouteGenerator']
    fastrouteParser:
        class:     'FastRoute\RouteParser\Std'
    fastrouteGenerator:
        class:     'FastRoute\DataGenerator\GroupCountBased'